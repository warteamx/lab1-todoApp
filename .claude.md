# Expo Lab - Project Overview for AI Assistant

## ğŸ¯ Project Summary

**Expo Lab** is a full-stack todo application demonstrating modern development practices with **Domain-Driven Design (DDD)**, **Clean Architecture**, and comprehensive testing. The project emphasizes **simplicity over complexity** and follows professional development standards.

### Live Deployment
- **Client (Web App)**: http://lab1-todoapp.s3-website.eu-north-1.amazonaws.com
- **Server (API)**: http://56.228.14.41/api
- **Health Check**: http://56.228.14.41/api/health

### Current Branch: `24-improve-template-docs`
- Working on improving documentation and template features
- Based on `main` branch (default)

---

## ğŸ—ï¸ Architecture Overview

### Design Principles
- **Domain-Driven Design (DDD)**: Business logic centered architecture
- **Clean Architecture**: Clear separation of concerns across layers
- **SOLID Principles**: Maintainable and extensible code
- **Testing First**: Comprehensive test coverage at all levels
- **Simplicity over Complexity**: Practical solutions over over-engineering

### Technology Stack

**Client (Expo React Native)**:
- **Framework**: Expo SDK 53, React Native 0.79.2, React 19.0.0
- **Language**: TypeScript 5.8.3
- **State Management**: TanStack Query 5.83.0 + React Context
- **Navigation**: Expo Router 5.0.6 (file-based routing)
- **Backend**: Supabase (auth, database, storage)
- **Styling**: Custom design system with themes

**Server (Express.js API)**:
- **Framework**: Express.js 5.1.0, Node.js 18+
- **Language**: TypeScript 5.8.3
- **Database**: PostgreSQL via Supabase with `postgres` SQL builder
- **Authentication**: JWT tokens via Supabase Auth
- **Testing**: Vitest 3.2.4 with Supertest
- **DevOps**: Docker, Docker Compose

---

## ğŸ“ Project Structure

```
lab1-todoApp/
â”œâ”€â”€ package.json              # Root scripts for client/server
â”œâ”€â”€ README.md                 # Project overview
â”œâ”€â”€ LICENSE                   # MIT License
â”œâ”€â”€ docs/                     # Project documentation
â”‚   â”œâ”€â”€ NAVIGATION_REFACTORING_SUMMARY.md
â”‚   â”œâ”€â”€ THEME_IMPROVEMENTS.md
â”‚   â”œâ”€â”€ navigation.md
â”‚   â””â”€â”€ AI/                   # AI prompts and results
â”œâ”€â”€ scripts/                  # Deployment and secret scripts
â”‚   â”œâ”€â”€ auto-github-secrets.sh
â”‚   â”œâ”€â”€ manual-github-secrets.sh
â”‚   â””â”€â”€ setup-*.sh
â”œâ”€â”€ client/                   # Expo React Native App
â”‚   â”œâ”€â”€ package.json          # Client dependencies and scripts
â”‚   â”œâ”€â”€ app.json              # Expo configuration
â”‚   â”œâ”€â”€ tsconfig.json         # TypeScript config
â”‚   â”œâ”€â”€ app/                  # File-based routing (Expo Router)
â”‚   â”‚   â”œâ”€â”€ _layout.tsx       # Root layout with providers
â”‚   â”‚   â”œâ”€â”€ index.tsx         # Landing page
â”‚   â”‚   â”œâ”€â”€ (auth)/           # Authentication group
â”‚   â”‚   â”‚   â”œâ”€â”€ sign-in.tsx
â”‚   â”‚   â”‚   â””â”€â”€ sign-up.tsx
â”‚   â”‚   â”œâ”€â”€ (user)/           # Protected user area
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx     # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/      # Profile management
â”‚   â”‚   â”‚   â”œâ”€â”€ todo/         # Todo features
â”‚   â”‚   â”‚   â”œâ”€â”€ ui-demo/      # Component demos
â”‚   â”‚   â”‚   â””â”€â”€ vr/           # VR/AR features
â”‚   â”‚   â””â”€â”€ docs/             # In-app documentation
â”‚   â”œâ”€â”€ api/                  # TanStack Query API layer
â”‚   â”‚   â”œâ”€â”€ profile.api.ts
â”‚   â”‚   â””â”€â”€ todo.api.ts
â”‚   â”œâ”€â”€ components/           # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/              # Base components (Button, Input, etc.)
â”‚   â”‚   â””â”€â”€ modules/         # Feature components (AvatarUpload, etc.)
â”‚   â”œâ”€â”€ themes/              # Design system
â”‚   â”‚   â”œâ”€â”€ colors.ts
â”‚   â”‚   â”œâ”€â”€ typography.ts
â”‚   â”‚   â”œâ”€â”€ spacing.ts
â”‚   â”‚   â””â”€â”€ themes.ts
â”‚   â”œâ”€â”€ providers/           # React Context providers
â”‚   â”œâ”€â”€ hooks/               # Custom React hooks
â”‚   â”œâ”€â”€ lib/                 # Utilities (supabase, api-utils)
â”‚   â”œâ”€â”€ constants/           # App constants
â”‚   â””â”€â”€ docs/                # Client documentation
â”‚       â”œâ”€â”€ ARCHITECTURE.md
â”‚       â”œâ”€â”€ INSTALLATION.md
â”‚       â”œâ”€â”€ TESTING.md
â”‚       â””â”€â”€ README-client.md
â””â”€â”€ server/                  # Express.js API Server
    â”œâ”€â”€ package.json         # Server dependencies and scripts
    â”œâ”€â”€ tsconfig.json        # TypeScript config
    â”œâ”€â”€ vitest.config.ts     # Test configuration
    â”œâ”€â”€ docker-compose.yml   # Docker orchestration
    â”œâ”€â”€ Dockerfile           # Container definition
    â”œâ”€â”€ docker.sh            # Docker helper script
    â”œâ”€â”€ src/                 # Source code (Domain-Driven Design)
    â”‚   â”œâ”€â”€ api/             # ğŸŒ API Layer (Presentation)
    â”‚   â”‚   â”œâ”€â”€ health/      # Health check endpoints
    â”‚   â”‚   â”œâ”€â”€ todo/        # Todo API endpoints
    â”‚   â”‚   â””â”€â”€ profile/     # Profile API endpoints
    â”‚   â”œâ”€â”€ domain/          # ğŸ¢ Domain Layer (Business Logic)
    â”‚   â”‚   â”œâ”€â”€ todo/        # Todo business domain
    â”‚   â”‚   â”‚   â”œâ”€â”€ entities/     # Business objects
    â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # Business logic
    â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/   # Contracts
    â”‚   â”‚   â”‚   â””â”€â”€ dto/          # Data structures
    â”‚   â”‚   â”œâ”€â”€ profile/     # Profile business domain
    â”‚   â”‚   â””â”€â”€ health/      # Health business domain
    â”‚   â”œâ”€â”€ infrastructure/  # ğŸ”§ Infrastructure Layer (Technical)
    â”‚   â”‚   â”œâ”€â”€ repositories/     # Data access implementations
    â”‚   â”‚   â”œâ”€â”€ storage/          # File storage (Supabase)
    â”‚   â”‚   â”œâ”€â”€ config/           # Configuration management
    â”‚   â”‚   â””â”€â”€ database/         # Database connection
    â”‚   â”œâ”€â”€ common/          # ğŸ› ï¸ Common Layer (Shared)
    â”‚   â”‚   â”œâ”€â”€ exceptions/       # Custom error types
    â”‚   â”‚   â”œâ”€â”€ middlewares/      # Shared middleware
    â”‚   â”‚   â”œâ”€â”€ types/            # TypeScript definitions
    â”‚   â”‚   â””â”€â”€ utils/            # Utility functions
    â”‚   â”œâ”€â”€ __tests__/       # ğŸ§ª Testing
    â”‚   â”‚   â”œâ”€â”€ unit/             # Domain logic tests
    â”‚   â”‚   â”œâ”€â”€ integration/      # API + Infrastructure tests
    â”‚   â”‚   â”œâ”€â”€ e2e/              # End-to-end tests
    â”‚   â”‚   â””â”€â”€ utils/            # Test utilities
    â”‚   â”œâ”€â”€ app.ts           # Express app configuration
    â”‚   â”œâ”€â”€ server.ts        # Server startup
    â”‚   â””â”€â”€ openapi.ts       # API documentation
    â”œâ”€â”€ docs/                # Server documentation
    â”‚   â”œâ”€â”€ ARCHITECTURE.md
    â”‚   â”œâ”€â”€ DDD_FOLDER_STRUCTURE.md
    â”‚   â”œâ”€â”€ TESTING.md
    â”‚   â”œâ”€â”€ ERROR_HANDLING.md
    â”‚   â”œâ”€â”€ SECURITY.md
    â”‚   â””â”€â”€ SERVER_START.md
    â””â”€â”€ logs/                # Application logs
```

---

## ğŸš€ Run Commands (From Root Folder)

### Quick Start Commands
```bash
# Install dependencies (both client and server)
cd client && npm install
cd ../server && npm install

# Start development servers
npm run server:dev    # Starts Express API server
npm run client:dev    # Starts Expo development server

# Alternative: Direct navigation
cd client && npm start
cd server && npm run dev
```

### Development Commands
```bash
# Linting
npm run lint:client   # Lint client code
npm run lint:server   # Lint server code

# Testing
npm run test:client   # Run client tests
npm run test:server   # Run server tests
```

### Advanced Server Commands (from server/ directory)
```bash
# Development
npm run dev           # Development server with hot reload
npm run build         # Build for production
npm start            # Start production server

# Testing
npm test             # Run all tests
npm run test:watch   # Watch mode
npm run test:coverage # Coverage report

# Docker
npm run docker:dev   # Run in Docker development
npm run docker:prod  # Run in Docker production
npm run docker:test  # Run tests in Docker

# Logs
npm run logs:view    # View combined logs
npm run logs:errors  # View error logs only
```

### Advanced Client Commands (from client/ directory)
```bash
# Development
npm start            # Start Expo development server
npm run web          # Web-specific build
npm run ios          # iOS development
npm run android      # Android development

# Build
npm run build:web    # Build for web deployment

# Testing
npm test             # Run tests
npm run test:watch   # Watch mode
npm run test:coverage # Coverage report

# Code Quality
npm run lint         # ESLint check
npm run lint:fix     # Auto-fix lint issues
npm run format       # Prettier formatting
```

---

## ğŸ¢ Domain-Driven Design Implementation

### Bounded Contexts
1. **Todo Context**: Task management, completion tracking, user-scoped data
2. **Profile Context**: User profile management, avatar uploads, account data
3. **Health Context**: System monitoring, API health checks

### Architecture Layers (Server)

#### 1. API Layer (`src/api/`)
- **Purpose**: HTTP request/response handling
- **Components**: Routes, Controllers, Middleware
- **Example**: `todo.routes.ts`, `todo.controller.ts`

#### 2. Domain Layer (`src/domain/`)
- **Purpose**: Business logic and rules
- **Components**: Entities, Services, Interfaces, DTOs
- **Example**: `todo.service.ts` with validation rules

#### 3. Infrastructure Layer (`src/infrastructure/`)
- **Purpose**: Technical implementations
- **Components**: Repositories, Database, Storage, Config
- **Example**: `todo.repository.ts` for data access

#### 4. Common Layer (`src/common/`)
- **Purpose**: Shared utilities and cross-cutting concerns
- **Components**: Exceptions, Middleware, Types, Utils
- **Example**: Custom error types, authentication middleware

### Key Design Patterns
- **Repository Pattern**: Data access abstraction
- **Service Layer Pattern**: Business logic encapsulation
- **Factory Pattern**: Object creation
- **Middleware Pattern**: Cross-cutting concerns
- **Dependency Injection**: Loose coupling

---

## ğŸ§ª Testing Strategy

### Testing Pyramid
- **70% Unit Tests**: Domain services, business logic
- **20% Integration Tests**: API endpoints, database operations  
- **10% E2E Tests**: Complete user workflows

### Test Organization
```
src/__tests__/
â”œâ”€â”€ unit/           # Fast, isolated domain tests
â”œâ”€â”€ integration/    # API + database tests
â”œâ”€â”€ e2e/           # Complete workflow tests
â””â”€â”€ utils/         # Test helpers and mocks
```

### Coverage Goals
- **Domain Services**: 95%+ coverage
- **API Controllers**: 85%+ coverage
- **Repositories**: 80%+ coverage
- **Overall**: 80%+ coverage

### Key Testing Tools
- **Vitest**: Test runner with TypeScript support
- **Supertest**: HTTP testing for API endpoints
- **V8 Coverage**: Accurate coverage reporting
- **Jest-style**: Familiar testing syntax

---

## ğŸ¨ Client Architecture (Clean Architecture)

### Architecture Layers

#### 1. Presentation Layer (`components/`, `app/`)
- **UI Components**: Reusable, themeable components
- **Screens**: Feature-specific screens with Expo Router
- **Layouts**: Shared layout components

#### 2. Application Layer (`hooks/`, `providers/`)
- **Custom Hooks**: Business logic encapsulation
- **Context Providers**: Global state management
- **Form Validation**: Input validation logic

#### 3. Infrastructure Layer (`api/`, `lib/`)
- **API Integration**: TanStack Query hooks
- **External Services**: Supabase integration
- **Utilities**: Helper functions

#### 4. Domain Layer (`constants/`, `themes/`)
- **Business Rules**: Application constants
- **Design System**: Consistent theming

### State Management Strategy
- **Local State**: React useState for component state
- **Global State**: React Context for auth, theme
- **Server State**: TanStack Query for API data
- **Persistent State**: Async Storage, Secure Store

### Component Architecture
```
ComponentName/
â”œâ”€â”€ ComponentName.tsx       # Main component
â”œâ”€â”€ ComponentName.types.ts  # TypeScript interfaces
â”œâ”€â”€ index.ts               # Barrel export
â””â”€â”€ __tests__/             # Tests
    â””â”€â”€ ComponentName.test.tsx
```

---

## ğŸ”§ Development Guidelines

### Code Organization
1. **Barrel Exports**: Use `index.ts` for clean imports
2. **Type Safety**: Define interfaces for all props and data
3. **Error Boundaries**: Implement error handling at component level
4. **Performance**: Use React.memo and useMemo when appropriate

### Naming Conventions
- **Files**: `kebab-case.type.ts` (e.g., `todo.service.ts`)
- **Components**: `PascalCase` (e.g., `TodoList`)
- **Interfaces**: `PascalCase` with `I` prefix (e.g., `ITodoService`)
- **Functions**: `camelCase` (e.g., `createTodo`)
- **Constants**: `UPPER_SNAKE_CASE` (e.g., `API_ENDPOINTS`)

### Error Handling
- **Custom Exceptions**: Specific error types with HTTP status codes
- **Error Middleware**: Centralized error processing
- **Graceful Degradation**: Handle failures gracefully
- **User-Friendly Messages**: Clear error communication

---

## ğŸ” Security Implementation

### Authentication & Authorization
- **JWT Tokens**: Supabase Auth integration
- **User-Scoped Data**: All data operations filtered by user
- **Secure Headers**: Helmet.js security headers
- **CORS Configuration**: Cross-origin request security

### Data Protection
- **Input Validation**: All user inputs validated
- **SQL Injection Protection**: Parameterized queries
- **XSS Prevention**: Proper data sanitization
- **File Upload Security**: Avatar upload restrictions

---

## ğŸ“š Documentation Strategy

### Client Documentation (`client/docs/`)
- **ARCHITECTURE.md**: Clean architecture, folder structure, patterns
- **INSTALLATION.md**: Setup and development environment
- **TESTING.md**: Testing strategies and best practices
- **README-client.md**: Client-specific getting started guide

### Server Documentation (`server/docs/`)
- **ARCHITECTURE.md**: DDD, Clean Architecture, design patterns
- **DDD_FOLDER_STRUCTURE.md**: Detailed folder organization
- **TESTING.md**: Comprehensive testing guide
- **ERROR_HANDLING.md**: Error handling patterns
- **SECURITY.md**: Security implementation
- **SERVER_START.md**: Deployment and startup guide

### Project Documentation (`docs/`)
- **AI/**: AI assistant prompts and implementation results
- **Navigation**: UI navigation and routing documentation
- **Themes**: Design system and theming improvements

---

## ğŸš€ Deployment & DevOps

### Deployment Targets
- **Client**: AWS S3 Static Website Hosting
- **Server**: AWS EC2 with Docker containerization
- **Database**: Supabase PostgreSQL
- **Storage**: Supabase Storage for avatars

### Development Workflow
1. **Local Development**: Use `npm run server:dev` and `npm run client:dev`
2. **Testing**: Comprehensive test suites for both client and server
3. **Linting**: ESLint and Prettier for code quality
4. **Docker**: Containerized development and production environments
5. **CI/CD**: GitHub Actions for automated testing and deployment

### Environment Management
- **Development**: Local Supabase or development database
- **Testing**: Isolated test database and environment
- **Production**: Secure production environment with proper secrets

---

## ğŸ¯ Key Features Implemented

### Authentication
- **Sign Up/Sign In**: Email-based authentication via Supabase
- **Protected Routes**: User authentication required for app features
- **Profile Management**: User profile with avatar upload capability

### Todo Management
- **CRUD Operations**: Create, read, update, delete todos
- **User-Scoped**: Each user sees only their todos
- **Real-time Updates**: Optimistic updates with TanStack Query
- **Validation**: Business rules enforced at domain level

### UI/UX Features
- **Responsive Design**: Works on iOS, Android, and Web
- **Theme System**: Light/dark mode with multiple theme options
- **Navigation**: File-based routing with Expo Router
- **Component Library**: Reusable UI components with design system

### Developer Experience
- **TypeScript**: Full type safety across the stack
- **Hot Reload**: Fast development with live updates
- **Comprehensive Testing**: Unit, integration, and E2E tests
- **Documentation**: Extensive documentation for all aspects
- **Docker Support**: Containerized development and deployment

---

## ğŸ¨ Recent Improvements

### Navigation Refactoring
- **Simplified Header**: Clean interface with profile avatar button
- **Settings Modal**: Organized auth and theme controls
- **Profile Avatar**: Visual status indicators and user feedback
- **Better UX**: Single-button access to all settings

### Theme System
- **Multiple Themes**: Light, dark, and custom theme options
- **Visual Selection**: Theme cards with preview
- **Quick Toggle**: Fast dark mode switching
- **Consistent Application**: Themes applied across all components

---

## ğŸ’¡ AI Assistant Guidelines

### When Working on This Project

1. **Understand the Architecture**: Always consider DDD layers and Clean Architecture principles
2. **Follow the File Structure**: Respect the established folder organization
3. **Use Root Commands**: Execute scripts from the root folder using package.json scripts
4. **Test First**: Write tests for new features and bug fixes
5. **Type Safety**: Ensure all TypeScript interfaces and types are properly defined
6. **Simplicity First**: Choose simple solutions over complex ones
7. **Documentation**: Update relevant documentation when making changes
8. **Business Logic**: Keep business rules in the domain layer
9. **Error Handling**: Use proper exception types and error middleware
10. **Security**: Ensure user data is properly scoped and validated

### Common Tasks
- **Adding Features**: Start with domain layer, then infrastructure, then API
- **Bug Fixes**: Identify the appropriate layer and write tests first
- **UI Changes**: Use the design system and maintain component consistency
- **Database Changes**: Consider impact on repositories and domain services
- **API Changes**: Update OpenAPI documentation and integration tests

### Key Files to Reference
- **Architecture**: `client/docs/ARCHITECTURE.md`, `server/docs/ARCHITECTURE.md`
- **Testing**: `server/docs/TESTING.md`, `client/docs/TESTING.md`
- **Structure**: `server/docs/DDD_FOLDER_STRUCTURE.md`
- **Setup**: `client/docs/INSTALLATION.md`, `server/docs/SERVER_START.md`

---

**Last Updated**: September 2025  
**Version**: 1.1.1  
**Branch**: 24-improve-template-docs  
**Maintained by**: Development Team

This project demonstrates production-ready development practices with Domain-Driven Design, Clean Architecture, comprehensive testing, and modern full-stack technologies. The emphasis is always on **simplicity over complexity** while maintaining professional standards.
